<%- include('../header') %>
<div class="row justify-content-center mt-5">
  <div class="col-md-6">
    <form class="row g-3" action="/transactions/update/<%= result.data.id %>" method="POST">
      <div class="row mb-3">
        <label for="">Edit data transaction</label>
      </div>
      <div class="mb-3 row">
        <label class="col-2 col-form-label">Kode Transaction</label>
        <div class="col-6">
          <input type="text" name="name" disabled class="form-control" value="<%= result.data.name %>"/>
          <input type="text" name="transactionId" hidden class="form-control" value="<%= result.data.transactionId %>"/>
        </div>
      </div>
      <div class="mb-3 row">
        <label class="col-2 col-form-label">Product</label>
        <div class="col-7">
          <select name="productId" class="form-select">
            <% result.products.forEach(product => { %>
            <option value="<%= product.id %>" <%= result.data.product.id == product.id ?'selected'  : '' %> >
              <%= product.name %> | qty : <%= product.stock %>
            </option>
            <% }); %>
          </select>
        </div>
      </div>
      <div class="mb-3 row">
        <label class="col-2 col-form-label">Members ID</label>
        <div class="col-6">
          <select name="memberId" class="form-select">
            <% result.members.forEach(member => { %>
            <option value="<%= member.id %>" <%= result.data.transaction.member.id == member.id ? 'selected' : '' %>><%= member.name %></option>
            <% }); %>
          </select>
        </div>
      </div>
      <div class="mb-3 row">
        <label class="col-2 col-form-label">Jumlah Qty</label>
        <div class="col-6">
          <input type="text" name="qty" class="form-control" required value="<%= result.data.qty %>"/>
        </div>
      </div>
      <div class="mb-3 row">
        <label class="col-2 col-form-label">Pembayaran</label>
        <div class="col-6">
          <select name="payment" class="form-select">
            <option value="cash" <%= result.data.transaction.payment == 'cash' ? 'selected' : '' %>>Cash</option>
            <option value="transfer" <%= result.data.transaction.payment == 'transfer' ? 'selected' : '' %>>Transfer</option>
            <option value="dp" <%= result.data.transaction.payment == 'dp' ? 'selected' : '' %>>DP</option>
          </select>
        </div>
      </div>
      <div class="col-12 float-right">
        <button class="btn btn-primary" type="submit">Simpan</button>
        <a href="/products" class="btn btn-danger">Kembali</a>
      </div>
    </form>
  </div>
</div>
